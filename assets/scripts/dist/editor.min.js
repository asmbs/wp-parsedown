!function($, w, d) {
    $.parsedown = {
        aceObject: null,
        aceSession: null,
        syncTimer: null,
        $wpEditor: null,
        options: {
            aceId: "ace-editor",
            aceOptions: {
                minLines: 24,
                maxLines: 1024,
                showInvisibles: !0,
                showPrintMargin: !1,
                fontSize: 13
            },
            aceTheme: "ace/theme/tomorrow",
            syncDelay: 500
        },
        initEditor: function(editorId) {
            var $aceContainer = $(d.createElement("pre")).attr("id", this.options.aceId), $wpEditorWrap = $("#wp-content-wrap"), $wpEditor = $("textarea#content"), $statusBar = $("#post-status-info");
            this.$wpEditor = $wpEditor;
            var currentContent = $wpEditor.val();
            $wpEditorWrap.hide(), $aceContainer.insertBefore($statusBar);
            var _ace = this.aceObject = w.ace.edit(this.options.aceId), _aceSession = this.aceSession = _ace.getSession();
            _ace.setOptions(this.options.aceOptions), _ace.setTheme(this.options.aceTheme), 
            _aceSession.setMode("ace/mode/markdown"), _aceSession.setUseWrapMode(!0), _ace.setValue(currentContent, -1), 
            $(w).on("sync.parsedown", this.syncContent), $aceContainer.on("keyup", this.armTrigger), 
            $(w).on("submit.parsedown", this.fireTrigger);
        },
        armTrigger: function() {
            var _p = $.parsedown;
            _p.syncTimer && clearTimeout(_p.syncTimer), _p.syncTimer = setTimeout(_p.fireTrigger, _p.options.syncDelay);
        },
        fireTrigger: function() {
            return $(w).trigger("sync.parsedown"), !0;
        },
        syncContent: function() {
            var _p = $.parsedown;
            _p.$wpEditor.val(_p.aceObject.getValue());
        }
    }, $(d).ready(function() {
        var parsedown = $.parsedown;
        $.parsedown.aceObject;
        parsedown.initEditor("ace-editor"), $(w).on("submit submit.autosave-local", parsedown, this.syncContent);
    });
}(jQuery, window, document);